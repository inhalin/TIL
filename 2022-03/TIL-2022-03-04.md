# TIL 2022-03-04

## 요구사항 제대로 파악하기

시작부터 [헤당 이슈](https://github.com/peoplenjob-com/peoplenjob-laravel/issues/2547)의 해결하려는 요구사항이 뭔지 파악이 잘 안되었다. 

어영부영 일주일(...)을 보내다가 아하 모먼트를 가지면서 파악한 내용은
- 현재 `config/job-posting`에서 디폴트 값으로 회원 등급별로 정해진 채용공고에 대한 최대 등록수/재등록수 및 등록/재등록 제한일을 
- 별도의 db 테이블을 생성해서 그곳에 회원별로 기존값에 대한 데이터를 넣어준다.

이렇게 바꾸는 이유는 `회원별로 올릴 수 있는 채용공고, 재등록 건수를 설정가능하게 별도 상품을 구성`하려는데 있었다.

일단 새로 테이블을 만들고 회원별 기본값을 seeding 해주었다.

그 후에는 프론트단에서 복잡하게 계산되고 있던 최대 등록수/재등록수, 등록제한일, 추천 등록수/재등록수 등을 바로 디비에 저장된 값을 가져와서 보여주도록 고쳐주었다.


관리자단에서는 기업/헤드헌팅 회원의 유료회원 정보 수정 창에서 최대 신규 등록수/재등록수, 신규등록/재등록 제한일 등을 수정할 수 있도록 필드를 추가해주었다.

여기까지는 순조로웠다. 리뷰 요청과 함게 감사 로그를 남길지 여쭈어보면서 뭔가 잘못되었다는 걸 알았다.

외주 팀장님과 이사님의 커멘트 핑퐁을 옮겨본다.

```
팀장님 >
'유료 회원 정보'에 보여준다면, 기존 '채용공고 가능수'와 같은 테이블에 저장이 나아 보이기도 하고...

관리자모드에서 해당 카운트 목록을 보여주는 페이지와 기본값과 다르게 설정된 회원들을 쉽게 찾을 수 있는 것 등 관리 이슈를 좀 고민해봐야할 것 같습니다.
```

```
이사님 >
관리자 페이지에서 데이터가 변경된 경우를 따로 보는 것도 필요하겠네요.

관리자에 변경정보를 적용할지 아닐지 check box를 두고 적용기간을 넣는 것은 어떨까요??
```

```
팀장님 >
[유료회원 정보]에서 함께 수정할지, 별도 [채용공고수 등록수 관리] 로 분리를 해낼지...

실제 사용 케이스(유료 판매, 특정회원에게만 한시적으로 늘려주기 등)를 기반으로 등 고민후 설계를 해봐야할 것 같습니다.
```

```
이사님 >
유료 판매, 특정회원에게만 한시적으로 늘려주기 ---> 이것이 목적 입니다. 유료판매의 경우 공식판매는 안하고, 비공식 offer만 하는 형태로 끼워팔기
```
여기서 아차 싶었다. 이번 이슈에서 정말로 해결하고자 했던 목적을 완전히 놓치고 있었던거다. 

> 다수의 회원에 대한 것이 아니고, 특정한 소수의 회원에게 `한시적으로` 수정을 반영할 것


이후로 팀장님은 다수의 회원에 대해 수정할 경우에 대해서까지 생각하시면서 유료 판매 프로세스, 상품 개발과 함께 재설계까지 고려하셨고, 이사님은 현재로서는 대략 10명 이하의 회원에게만 필요한 기능이기에 아직은 수작업으로 관리 가능하다고 하셨다.

```
팀장님 > 
적용회사가 작다면 엑셀이나 관리자 메모로 별도 관리하고, 다음처럼 회원마다 설정값만 지정하도록 단순화하는 방향은 어떨까요?

- 기존 유료회원과 무관하게, 유료 판매시 연동 등은 전혀 고려하지 않음.
- 기존 '채용공고 가능수' 컬럼이 있는 user_companies 테이블에 설정값 컬럼 추가.  
    -  기본 값은 null, null 일 경우 기존 config 정책 따르고 데이터가 입력된 경우만 해당 값 사용. (기본 값 오버라이딩 개념으로)
- [회원 관리] 하위에 [채용공고수 제한 관리] 메뉴 추가
    - 목록에서 전체 기업/헤드헌팅의 정보를 회원관리와 유사하게 보여주되, `최대 신규 등록수, 최대 재등록수` 등의 설정값 항목을 표시
    - '관리'칸에 '채용공고수 제한' 버튼을 추가하여 설정값과 관리자 메모를 수정 가능하도록 함.  (수정폼 하단에는 유료회원처럼 변경 로그, 감사 로그 링크)
    - 목록 상단 검색 영역에 '최대 신규 등록수 지정, ...' 검색 링크를 추가하여 해당 값이 지정된 회원들만 쉽게 검색 가능하도록 지원.
```

팀장님이 정리하신 내용은 이러하고 나는 결국 처음에 요구사항에 대해 깊이 생각하지 않고 단순 표면적인 부분만 생각해서 일을 한 셈이다.

요구사항 파악 하는 거 정말 중요한데 나한테는 아직도 어렵다. 왜 해당 이슈가 문제가 되었는지, 이 문제를 해결하려는 진짜 목적이 무엇인지에 대해 명확히 파악하는 것이 필요하다. 

단순해보이는 문제가 단순하지 않을 수 있고 복잡해보이는 문제가 엄청 간단하게 풀릴 수도 있는 거다.
